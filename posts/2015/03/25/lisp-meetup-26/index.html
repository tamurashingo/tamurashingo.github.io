<!DOCTYPE html>
<html lang="ja-jp">
    <head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>
				Lisp Meet Up ♯26に行ってきました &middot; Web技術と親しむ
		</title>

		
  		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700">
		
		<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

		
		<link href="" rel="alternate" type="application/rss+xml" title="Web技術と親しむ" />
	</head>

    <body>
        		<nav class="nav">
			<div class="nav-container">
				<a href="/">
					<h2 class="nav-title">Web技術と親しむ</h2>
				</a>
				<ul>
    <li><a href="/about">About</a></li>
    <li><a href="/">Posts</a></li>
</ul>
			</div>
		</nav>

        

<main>
	<div class="post">
		<div class="post-info">
    <span>Written by</span>
        
        <br>
        <span>on&nbsp;</span><time datetime="2015-03-25 23:47:15 &#43;0000 UTC">March 25, 2015</time>
</div>
		<h1 class="post-title">Lisp Meet Up ♯26に行ってきました</h1>
<div class="post-line"></div>

		


		

<p>tamuraです。</p>

<p>Lisp Meet Up presented by Shibuya.lisp #26 に行ってきましたので、まとめたメモを公開いたします。
今回はClojureの回となっております。</p>

<!-- more -->

<h2 id="clojureのチャットボットフレームワーク">Clojureのチャットボットフレームワーク</h2>

<p>by athos0220さん</p>

<h3 id="いろいろある-チャットボットフレームワーク">いろいろある？チャットボットフレームワーク</h3>

<ul>
<li>Hubot

<ul>
<li>GitHub製</li>
</ul></li>

<li><p>Ruboty</p>

<ul>
<li>Rubyで作られている</li>
</ul></li>

<li><p>背景</p>

<ul>
<li>ChatOpsがはやっている</li>
<li>実行結果もbotがつぶやいてくれる</li>
</ul></li>
</ul>

<h3 id="フレームワークのアーキテクチャ">フレームワークのアーキテクチャ</h3>

<ul>
<li>ロボット

<ul>
<li>アダプターとスクリプトの仲介</li>
<li>(でかい)</li>
</ul></li>
<li>アダプター

<ul>
<li>個別チャットサービスの差異の吸収</li>
</ul></li>
<li>スクリプト

<ul>
<li>どのメッセージにどう反応するか記述</li>
</ul></li>
</ul>

<pre><code>[adapter] &lt;-&gt; [robot] &lt;-&gt; [script]
</code></pre>

<p>parabola
今回作ったClojure製のチャットボットフレームワーク</p>

<h3 id="複数アダプターの並列実行">複数アダプターの並列実行</h3>

<ul>
<li>アダプターは基本的にイベントループで動く

<ul>
<li>複数動かすにはマルチスレッドで実行</li>
<li>アダプターから別のアダプターへメッセージを流すことも可能に</li>
</ul></li>
<li>core.asyncで複数のスレッドからのメッセージを直列化</li>
</ul>

<h3 id="リロード可能なアダプター-スクリプト">リロード可能なアダプター／スクリプト</h3>

<ul>
<li>アダプター／スクリプトへの変更を反映させるためにリロードさせたい</li>
<li>ファイルのリロードの前後で正しい順で行う

<ul>
<li>スレッドの起動／停止</li>
<li>チャットサービスへの接続／切断</li>
</ul></li>
<li>Componentライブラリ

<ul>
<li>整合性のとれたリロードの実現を支援するシンプルなライブラリ</li>
</ul></li>
</ul>

<h3 id="関数ベースで記述できるスクリプト">関数ベースで記述できるスクリプト</h3>

<ul>
<li>スクリプトは基本的に関数で書く</li>
<li>ミドルウェアで機能を拡張する</li>
</ul>

<h2 id="typed-clojure">Typed Clojure</h2>

<p>by にだーさん</p>

<h3 id="clojureの良し悪し">Clojureの良し悪し</h3>

<ul>
<li>関数言語らしい文法</li>
<li>シーケンスをベースにした</li>
<li>動的型付け

<ul>
<li>実行時エラー</li>
</ul></li>
</ul>

<h3 id="typed-clojure-1">Typed Clojure</h3>

<ul>
<li>Clojureに漸進的型付けを実現</li>
<li>実行時の挙動には影響しない</li>
<li>Lintのように使える</li>
<li>現在は core.typed になっている</li>
<li>Leiningenで導入できる</li>
</ul>

<h4 id="例-数値を受け取って数値を返す">例 数値を受け取って数値を返す</h4>
<div class="highlight"><pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nv">ann</span> <span class="nv">plus</span> <span class="p">[</span><span class="nv">Num</span> <span class="nb">-&gt; </span><span class="nv">Num</span><span class="p">])</span>
<span class="p">(</span><span class="kd">defn </span><span class="nv">plus</span> <span class="p">[</span><span class="nv">x</span><span class="p">]</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">x</span> <span class="mi">1</span><span class="p">))</span>

<span class="p">(</span><span class="nv">check-ns</span><span class="p">)</span></code></pre></div>
<p>※チェックに通らないとすごい怒り方をする</p>

<h4 id="例-複数の型を取りうる型を記述できる">例 複数の型を取りうる型を記述できる</h4>
<div class="highlight"><pre class="chroma"><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nv">ann</span> <span class="nv">plus2</span> <span class="p">[(</span><span class="nv">t/U</span> <span class="nv">Num</span> <span class="nv">String</span><span class="p">)</span> <span class="nv">-&gt;String</span><span class="p">])</span>
<span class="p">(</span><span class="kd">defn </span><span class="nv">plus2</span> <span class="p">[</span><span class="nv">x</span><span class="p">]</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">string? </span><span class="nv">x</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">str </span><span class="nv">x</span> <span class="mi">1</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">str </span><span class="p">(</span><span class="nb">+ </span><span class="nv">x</span> <span class="mi">1</span><span class="p">))))</span></code></pre></div>
<h3 id="メリットデメリット">メリットデメリット</h3>

<ul>
<li><p>利点</p>

<ul>
<li>プログラムの信頼性の向上</li>
<li>assertと違い実行時にコストを消費しない</li>
</ul></li>

<li><p>欠点</p>

<ul>
<li>型を書くコストが大きい</li>
<li>外部ライブラリも型記述が必要</li>
</ul></li>
</ul>

<h2 id="clojure開発環境nightcodeについて">Clojure開発環境Nightcodeについて</h2>

<p>by haijuさん</p>

<ul>
<li>gameライブラリ play-cljの作者</li>
<li>初心者向けのClojure開発環境</li>

<li><p>使っている人があまりいない</p></li>

<li><p>なにぶん情報がないのでわからないことが多い</p></li>
</ul>

<h2 id="感想">感想</h2>

<p>TypedClojureに一番興味を覚えました。
Lispはあまり大人数では組まないことが多いと思うのですが、仕事で使うとなると誰がそのコードを使うかわからないので、そういう時に役に立つんではないかと思ったりします。
SIerがClojureの方向を向いてくれると仕事でも使えるのではないかと思います。</p>


		
	</div>

	<div class="pagination">
		<a href="/posts/2015/03/07/improve-base64encoder/" class="left arrow">&#8592;</a>
		<a href="/posts/2015/04/12/jdk-install/" class="right arrow">&#8594;</a>

		<a href="#" class="top">Top</a>
	</div>
</main>


        		<footer>
			<span>
			&copy; <time datetime="2019-04-16 21:56:01.449426 &#43;0900 JST m=&#43;0.535756428">2019</time> tamura shingo. Made with <a href='https://gohugo.io'>Hugo</a> using the <a href='https://github.com/EmielH/tale-hugo/'>Tale</a> theme.
			</span>
		</footer>

    </body>
</html>
